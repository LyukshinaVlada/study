---
## Author
author:
  name: Люкшина Влада Алексеевна
  email: 1132243022@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Лабораторная работа № 5"
subtitle: "Управление системными службами"
---


# Цель работы

Получение навыков управления системными службами операционной системы посредством systemd.


# Задание

1. Выполните основные операции по запуску (останову), определению статуса, добавлению (удалению) в автозапуск и пр. службы Very Secure FTP.
2. Продемонстрируйте навыки по разрешению конфликтов юнитов для служб firewalld и iptables.
3. Продемонстрируйте навыки работы с изолированными целями.


# Выполнение лабораторной работы

Получаем полномочия администратора и проверяем статус службы Very Secure FTP. Так как служба Very Secure FTP не установлена, сервис в настоящее время отключён.  
![Статус службы](image/1.png)

Устанавливаем службу Very Secure FTP.  
![Установка](image/2.png)

Запустим службу Very Secure FTP и проверим ее статус. Видим, что служба в настоящее время работает, но не будет активирована при перезапуске операционной системы.  
![Запуск](image/3.png)

Добавим службу Very Secure FTP в автозапуск при загрузке операционной системы. Затем проверим статус службы.  
![Автозапуск](image/4.png)

Удалим службу из автозапуска, используя команду systemctl disable, и снова проверим её статус.  
![Удаление](image/5.png)

Выведем на экран символические ссылки, ответственные за запуск различных сервисов. Увидим, что ссылки на vsftpd.service не существует.  
![Ссылки](image/6.png)

Снова добавим службу Very Secure FTP в автозапуск и выведем на экран символические ссылки, ответственные за запуск различных сервисов. Заметим, что создана символическая ссылка.  
![Ссылка](image/7.png)

Снова проверим статус службы Very Secure FTP. Увидим, что для файла юнита состояние изменено с disabled на enabled.  
![Статус](image/8.png)

Выведем на экран список зависимостей юнита.  
![Список](image/9.png)

Выведем на экран список юнитов, которые зависят от данного юнита.  
![Юниты](image/10.png)

Установим iptables.  
![Установка](image/11.png)

Проверим статус firewalld.  
![Статус](image/12.png)

Проверим статус iptables.  
![Статус](image/13.png)

Попробуем запустить firewalld и iptables. Увидим, что при запуске одной службы вторая не запускается.  
![Запуск](image/14.png)

Выведем настройки конфликтов для первого юнита.  
![Конфликты](image/15.png)

Выведем настройки конфликтов для второго юнита.  
![Конфликты](image/16.png)

Выгрузим службу iptables и проверим ее статус.  
![Выгрузка](image/17.png)

Загрузим службу firewalld.  
![Загрузка](image/18.png)

Заблокируем запуск iptables. Заметим, что создалась символическая ссылка на /dev/null для iptables.service.  Это сделает невозможным случайный запуск сервиса iptables. Попробуем запустить iptables. Видим, что появилось сообщение об ошибке. Попробуем добавить iptables в автозапуск. Сервис будет неактивен, а статус загрузки отобразится как замаскированный.  
![Ошибка](image/19.png)

Перейдем в каталог systemd и найдем список всех целей, которые можно изолировать.  
![Список](image/20.png)

Переключим операционную систему в режим восстановления, введем пароль root на консоли сервера для входа в систему и корректно перезапустим операционную систему.  
![Режим восстановления](image/21.png)

Выведем на экран цель, установленную по умолчанию. Установим для запуска по умолчанию текстовый режим.  
![Текстовый режим](image/22.png)

Перегрузим систему командой reboot. Убедимся, что система загрузилась в текстовом режиме. Получите полномочия администратора и установим запуск по умолчанию в графическом режиме.  
![Графический режим](image/23.png)

Вновь перегрузим систему и убедимся, что система загрузилась в графическом режиме.  
![Графический режим](image/24.png)


# Выводы

В лабораторной работе №5 мы научились работать с системными службами операционной системы посредством systemd.  

# Ответы на контрольные вопросы

1. Что такое юнит (unit)? Приведите примеры.  
Юнит — это базовый объект управления в systemd, который представляет собой системный ресурс или службу. Юниты определяются в конфигурационных файлах и могут быть разных типов.  

Основные типы юнитов:  

Сервис (service): nginx.service, ssh.service  

Сокет (socket): sshd.socket — активация служб по сетевому соединению  

Цель (target): multi-user.target, graphical.target — группы юнитов (аналоги уровней запуска)  

2. Какая команда позволяет убедиться, что цель больше не входит в список автоматического запуска?  

![-](image/25.png)

3. Какую команду использовать для отображения всех загруженных сервисных юнитов?  

![-](image/26.png)

4. Как создать потребность (wants) в сервисе?  

![-](image/27.png)

5. Как переключить текущее состояние на цель восстановления (rescue target)?  

![-](image/28.png)

6. Причина получения сообщения о том, что цель не может быть изолирована  
Основные причины:  
Циклические зависимости между юнитами  
Отсутствуют альтернативы для критически важных служб  
Жесткие зависимости (Requires вместо Wants)  
Конфликтующие юниты, которые нельзя остановить одновременно  

7. Какая команда покажет зависимости от службы?  

![-](image/29.png)




